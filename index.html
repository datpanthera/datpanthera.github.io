<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gá»­i Trang yÃªu dáº¥u â¤ï¸</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container" id="mainContainer">
        <!-- Cáº£nh 1: Lá»i chÃºc 20/10 -->
        <div id="scene-1" class="scene">
            <h1>Gá»­i Trang yÃªu dáº¥u,</h1>
            <p>HÃ´m nay lÃ  ngÃ y 20/10, nhÆ° bao ngÆ°á»i Ä‘Ã n Ã´ng khÃ¡c, anh muá»‘n gá»­i Ä‘áº¿n em nhá»¯ng lá»i chÃºc chÃ¢n thÃ nh nháº¥t.</p>
            <p>ChÃºc em luÃ´n xinh Ä‘áº¹p, ráº¡ng rá»¡ vÃ  háº¡nh phÃºc. Mong ráº±ng má»i Ä‘iá»u tá»‘t Ä‘áº¹p nháº¥t sáº½ Ä‘áº¿n vá»›i em â€” trong há»c táº­p, cÃ´ng viá»‡c vÃ  cuá»™c sá»‘ng. ChÃºc em cÃ³ má»™t ngÃ y Phá»¥ ná»¯ Viá»‡t Nam tháº­t vui váº», trÃ n ngáº­p hoa, quÃ  vÃ  nhá»¯ng lá»i yÃªu thÆ°Æ¡ng.</p>
            <div class="buttons">
                <button class="continueBtn">Tiáº¿p tá»¥c ğŸ’Œ</button>
            </div>
        </div>

        <!-- Cáº£nh 2: Há»“i á»©c tuá»•i thÆ¡ -->
        <div id="scene-2" class="scene hidden">
            <h1>Nhá»¯ng ngÃ y xÆ°a...</h1>
            <p>NhÃ¢n dá»‹p nÃ y, anh cÅ©ng muá»‘n nÃ³i ra Ä‘iá»u mÃ  anh Ä‘Ã£ giá»¯ trong lÃ²ng suá»‘t báº¥y lÃ¢u. Thá»i gian trÃ´i tháº­t nhanh. Anh biáº¿t em tá»« khi em cÃ²n há»c lá»›p 1, há»“i máº¹ em dáº«n em Ä‘i sinh hoáº¡t hÃ¨ á»Ÿ Äá»“ng TÃ¢m. Khi Ä‘Ã³ anh gá»i em lÃ  â€œcon lá»£n cÃ²iâ€, cÃ²n em cÅ©ng gá»i anh lÃ  cÃ¡i gÃ¬ Ä‘Ã³ mÃ  anh quÃªn máº¥t rá»“i. Anh váº«n cÃ²n giá»¯ váº¿t sáº¹o mÃ  em cáº¥u cho Ä‘áº¿n táº­n bÃ¢y giá», khÃ´ng biáº¿t khi áº¥y anh Ä‘Ã£ trÃªu em chuyá»‡n gÃ¬ ná»¯a.</p>
            <p>Há»“i Ä‘Ã³ cÃ²n cÃ³ cáº£ mÃ n giáº­t tÃ³c, Ä‘Ã¡nh nhau, máº¹ em cháº¯c cÅ©ng khÃ´ng biáº¿t Ä‘Ã¢u.</p>
            <div class="buttons">
                <button class="continueBtn">VÃ  rá»“i...</button>
            </div>
        </div>

        <!-- Cáº£nh 3: Gáº·p láº¡i lá»›p 7 -->
        <div id="scene-3" class="scene hidden">
            <h1>Gáº·p láº¡i</h1>
            <p>Äáº¿n táº­n lÃºc em lá»›p 6, em má»›i nhá»› láº¡i anh â€” khi tÃ¬nh cá» gáº·p nhau. HÃ¬nh nhÆ° lÃºc Ä‘Ã³ anh váº«n tiáº¿p tá»¥c trÃªu em thÃ¬ pháº£i, cháº¯c lÃ  cÃ¡i táº­t trÃªu gÃ¡i ngáº¥m vÃ o mÃ¡u rá»“i. Giá» thÃ¬ háº¿t rá»“i, khÃ´ng cÃ²n nhÆ° ngÃ y xÆ°a ná»¯a.</p>
            <p>NhÆ°ng nhá» váº­y mÃ  hai Ä‘á»©a cÃ³ cÆ¡ há»™i nÃ³i chuyá»‡n, quen láº¡i, dÃ¹ lÃºc áº¥y cÅ©ng cÃ³ thÃªm má»™t ngÆ°á»i khÃ¡c ná»¯a. LÃºc Ä‘Ã³ anh bá»‹ má»i ngÆ°á»i nÃ³i nhiá»u quÃ¡ nÃªn anh chá»§ Ä‘á»™ng dá»«ng láº¡i, khÃ´ng tiáº¿p xÃºc vá»›i cáº£ hai ná»¯a.</p>
            <div class="buttons">
                <button class="continueBtn">Sau Ä‘Ã³...</button>
            </div>
        </div>

        <!-- Cáº£nh 4: Thá»i Covid -->
        <div id="scene-4" class="scene hidden">
            <h1>Thá»i Covid</h1>
            <p>Rá»“i Ä‘áº¿n thá»i Covid, mÃ¬nh láº¡i vÃ´ tÃ¬nh gáº·p nhau khi Ä‘i Ä‘Ã¡nh bÃ³ng. CÃ³ láº½ khoáº£ng thá»i gian Ä‘Ã³ khiáº¿n hai Ä‘á»©a trá»Ÿ nÃªn thÃ¢n thiáº¿t hÆ¡n bao giá» háº¿t. Tá»« Ä‘Ã³, nhá»¯ng tin nháº¯n Ä‘áº§u tiÃªn Ä‘Æ°á»£c gá»­i Ä‘i â€” vÃ  anh cáº£m nháº­n Ä‘Æ°á»£c má»™t Ä‘iá»u gÃ¬ Ä‘Ã³ ráº¥t trong sÃ¡ng, ráº¥t tá»± nhiÃªn tá»« cáº£ hai. Gáº§n Ä‘Ã¢y anh cÃ³ Ä‘á»c láº¡i nhá»¯ng tin nháº¯n ngÃ y áº¥y, vÃ  tháº­t sá»± khÃ´ng ngá» ráº±ng mÃ¬nh tá»«ng cÃ³ thá»ƒ chia sáº» má»i thá»© má»™t cÃ¡ch vÃ´ tÆ° nhÆ° váº­y.</p>
            <p>Giá» Ä‘Ã¢y, anh ráº¥t khÃ³ Ä‘á»ƒ lÃ m Ä‘Æ°á»£c Ä‘iá»u Ä‘Ã³ vá»›i báº¥t ká»³ ai khÃ¡c. NhÆ°ng rá»“i, chÃºng mÃ¬nh láº¡i dá»«ng láº¡i â€” má»™t cÃ¡ch khÃ³ hiá»ƒu, do anh cÅ©ng khÃ´ng tiáº¿p tá»¥c chia sáº» hay nháº¯n gÃ¬ vá»›i em ná»¯a. Khi áº¥y anh cÅ©ng giá»‘ng nhÆ° em bÃ¢y giá», vá»«a má»›i vÃ o Ä‘áº¡i há»c.</p>
            <div class="buttons">
                <button class="continueBtn">Nhá»¯ng nÄƒm thÃ¡ng xa cÃ¡ch</button>
            </div>
        </div>

        <!-- Cáº£nh 5: Gáº·p láº¡i trÃªn xe bus -->
        <div id="scene-5" class="scene hidden">
            <h1>Ngáº¡i ngÃ¹ng</h1>
            <p>Sau Ä‘Ã³, Ä‘Ã´i lÃºc anh vÃ  em váº«n gáº·p nhau, nhÆ° trÃªn xe buÃ½t hay khi em Ä‘i Ä‘Ã¡nh cáº§u lÃ´ng, nhÆ°ng cÅ©ng chá»‰ dá»«ng láº¡i á»Ÿ nhá»¯ng lá»i chÃ o há»i. Tháº­t lÃ²ng, anh khÃ´ng biáº¿t pháº£i nÃ³i gÃ¬ vá»›i em.</p>
            <p>Anh vá»‘n khÃ´ng giá»i thá»ƒ hiá»‡n cáº£m xÃºc tháº­t, thÆ°á»ng giá»¯ thÃ¡i Ä‘á»™ trung láº­p khi á»Ÿ ngoÃ i xÃ£ há»™i, cho Ä‘áº¿n táº­n bÃ¢y giá» váº«n váº­y. NhÆ°ng lÃºc áº¥y, anh ngáº¡i láº¯m â€” má»™t pháº§n vÃ¬ nhá»¯ng lá»i há»©a vá»›i em, má»™t pháº§n vÃ¬ chÆ°a Ä‘á»§ can Ä‘áº£m Ä‘á»ƒ Ä‘á»‘i diá»‡n vá»›i em.</p>
            <div class="buttons">
                <button class="continueBtn">VÃ  Ä‘á»‹nh má»‡nh...</button>
            </div>
        </div>

        <!-- Cáº£nh 6: Dá»‹p A80 -->
        <div id="scene-6" class="scene hidden">
            <h1>TrÃ¹ng há»£p vÃ  Rung Ä‘á»™ng</h1>
            <p>Rá»“i má»™t Ä‘iá»u khÃ´ng ngá» Ä‘Ã£ xáº£y ra â€” dá»‹p A80, em vÃ o Ä‘áº¡i há»c. CÃ³ thá»ƒ em chÆ°a biáº¿t, anh cÅ©ng vá»«a tá»‘t nghiá»‡p Ä‘áº¡i há»c. Tháº­t trÃ¹ng há»£p, má»™t láº§n ná»¯a chÃºng ta láº¡i gáº·p nhau á»Ÿ nhá»¯ng dáº¥u má»‘c quan trá»ng cá»§a cuá»™c Ä‘á»i. TrÃ²n bá»‘n nÄƒm rá»“i, vÃ  thÃªm má»™t láº§n ná»¯a, anh vá»›i em láº¡i cÃ³ thá»ƒ trÃ² chuyá»‡n â€” khÃ´ng cÃ²n vÃ´ tÆ°, há»“n nhiÃªn nhÆ° trÆ°á»›c mÃ  thay vÃ o Ä‘Ã³ lÃ  sá»± nháº¹ nhÃ ng, xen láº«n chÃºt ngÆ°á»£ng ngÃ¹ng.</p>
            <p>Tháº­t sá»±, trÃ¡i tim anh láº¡i Ä‘áº­p rá»™n rÃ ng nhÆ° thuá»Ÿ ban Ä‘áº§u.</p>
            <div class="buttons">
                <button class="continueBtn">Äiá»u anh muá»‘n nÃ³i...</button>
            </div>
        </div>

        <!-- Cáº£nh 7: Lá»i tá» tÃ¬nh -->
        <div id="scene-7" class="scene hidden">
            <h1>Gá»­i em,</h1>
            <p>Thá»i gian tiáº¿p xÃºc khÃ´ng dÃ i, nhÆ°ng Ä‘á»§ Ä‘á»ƒ khÆ¡i dáº­y trong anh nhá»¯ng cáº£m xÃºc ráº¥t tháº­t, ráº¥t khÃ³ táº£. Anh báº¯t Ä‘áº§u nhá»›, báº¯t Ä‘áº§u muá»‘n quan tÃ¢m, chÄƒm sÃ³c, yÃªu thÆ°Æ¡ng em â€” nhÆ° má»™t báº£n nÄƒng. Ban Ä‘áº§u anh nghÄ© chá»‰ mÃ¬nh anh cáº£m tháº¥y váº­y, nhÆ°ng khi nháº­n ra em cÅ©ng Ä‘ang Ä‘Ã³n nháº­n, anh thá»±c sá»± ráº¥t vui.</p>
            <p>Cuá»™c sá»‘ng cá»§a anh lÃ  má»™t chuá»—i thá»­ thÃ¡ch vÃ  Ã¡p lá»±c, lÃºc nÃ o cÅ©ng khiáº¿n anh ráº¥t má»‡t má»i, nhÆ°ng chá»‰ cáº§n á»Ÿ cáº¡nh em, má»i thá»© nhÆ° dá»‹u láº¡i, bÃ¬nh yÃªn hÆ¡n ráº¥t nhiá»u.</p>
            <p>Anh yÃªu em, vÃ  anh muá»‘n Ä‘Æ°á»£c quan tÃ¢m, chÄƒm sÃ³c, yÃªu thÆ°Æ¡ng em. Anh cÃ³ thá»ƒ khÃ´ng quÃ¡ lÃ£ng máº¡n hay ngá»t ngÃ o, anh cÅ©ng khÃ´ng giá»i thá»ƒ hiá»‡n cáº£m xÃºc, nhÆ°ng anh tin ráº±ng tÃ¬nh cáº£m vÃ  táº¥m lÃ²ng cá»§a anh khÃ´ng thua kÃ©m báº¥t ká»³ ai.</p>
            <h2>Em Ä‘á»“ng Ã½ lÃ m ngÆ°á»i yÃªu anh nhÃ©?</h2>
            <div class="buttons">
                <button id="yesBtn">Äá»“ng Ã½ ğŸ¥°</button>
                <button id="noBtn">KhÃ´ng ğŸ˜¢</button>
            </div>
        </div>

        <!-- Cáº£nh 8: Cáº£m Æ¡n -->
        <div id="thankYou" class="hidden">
            <div id="hearts-container"></div>
            <div class="flower-bouquet">ğŸ’</div>
            <h1>Cáº£m Æ¡n em, em tháº­t tuyá»‡t vá»i. <span class="pulsing-heart">â¤ï¸</span></h1>
            <p>Anh sáº½ khÃ´ng Ä‘á»ƒ em pháº£i há»‘i háº­n vá» quyáº¿t Ä‘á»‹nh hÃ´m nay Ä‘Ã¢u.</p>
            <div class="pyro"><div class="before"></div><div class="after"></div></div>
        </div>
    </div>

    <form id="google-form" class="hidden">
        <input type="text" name="entry.YOUR_ENTRY_ID" value="Äá»“ng Ã½">
    </form>

    <script>
        const scenes = Array.from(document.querySelectorAll('.scene'));
        const continueBtns = document.querySelectorAll('.continueBtn');
        const thankYou = document.getElementById('thankYou');
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const mainContainer = document.getElementById('mainContainer');
        let currentScene = 0;
        
        continueBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                if (currentScene < scenes.length - 1) {
                    const current = scenes[currentScene];
                    current.classList.add('hidden');
                    clearCountdown();
                    advanceScene();
                }
            });
        });
        function moveToNextScene() {
            if (isTyping || currentScene >= scenes.length - 1) return;
            advanceScene();
        }

        yesBtn.addEventListener('click', () => {
            submitToGoogleForm();
            const lastScene = scenes[currentScene];
            lastScene.classList.add('hidden');
            
            thankYou.classList.remove('hidden'); // Hiá»ƒn thá»‹ mÃ n hÃ¬nh cáº£m Æ¡n Ä‘á»ƒ animation hoa báº¯t Ä‘áº§u
            mainContainer.style.backgroundColor = '#ffe4e1'; // Äá»•i mÃ u ná»n
            createFallingHearts();
        });

        noBtn.addEventListener('mouseover', () => {
            const x = Math.random() * (window.innerWidth - noBtn.offsetWidth);
            const y = Math.random() * (window.innerHeight - noBtn.offsetHeight);
            noBtn.style.position = 'absolute';
            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';
        });

        function submitToGoogleForm() {
            const form = document.getElementById('google-form');
            const formURL = 'https://docs.google.com/forms/d/e/LONG_RANDOM_STRING/formResponse';
            const entryID = 'entry.1234567890'; // Thay báº±ng entry ID tháº­t cá»§a báº¡n

            const formData = new FormData(form);
            formData.set(entryID, 'Äá»“ng Ã½');

            fetch(formURL, {
                method: 'POST',
                body: formData,
                mode: 'no-cors'
            }).catch(error => console.error('Error!', error.message));
        }

        function createFallingHearts() {
            const container = document.getElementById('hearts-container');
            const heartsCount = 30; // Sá»‘ lÆ°á»£ng trÃ¡i tim
            for (let i = 0; i < heartsCount; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart-fall');
                heart.innerText = 'â¤ï¸';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 2 + 3) + 's'; // Thá»i gian rÆ¡i tá»« 3-5s
                heart.style.animationDelay = Math.random() * 4 + 's'; // Xuáº¥t hiá»‡n ngáº«u nhiÃªn trong 4s Ä‘áº§u
                heart.style.fontSize = (Math.random() * 1 + 1) + 'rem'; // KÃ­ch thÆ°á»›c ngáº«u nhiÃªn
                
                container.appendChild(heart);
            }
        }

        // --- Logic cho hiá»‡u á»©ng gÃµ chá»¯ ---

        // HÃ m gÃµ chá»¯
        function typeEffect(element, text, speed = 40) {
            return new Promise(resolve => {
                let i = 0;
                element.innerHTML = '';
                const cursor = document.createElement('span');
                cursor.className = 'typing-cursor';
                element.appendChild(cursor);

                function typing() {
                    if (i < text.length) {
                        cursor.insertAdjacentText('beforebegin', text.charAt(i));
                        i++;
                        setTimeout(typing, speed);
                    } else {
                        cursor.remove(); // XÃ³a con trá» khi gÃµ xong
                        resolve();
                    }
                }
                typing();
            });
        }

        // HÃ m báº¯t Ä‘áº§u gÃµ chá»¯ cho má»™t cáº£nh cá»¥ thá»ƒ
        async function startTypingForScene(sceneElement) {
            const h1 = sceneElement.querySelector('h1');
            const paragraphs = sceneElement.querySelectorAll('p');
            const h2 = sceneElement.querySelector('h2'); // ThÃªm h2 cho cáº£nh cuá»‘i
            const buttonContainer = sceneElement.querySelector('.buttons');
            
            isTyping = true;

            // Chuáº©n bá»‹ cÃ¡c pháº§n tá»­ cáº§n gÃµ chá»¯
            const elementsToType = [];
            paragraphs.forEach(p => elementsToType.push({ el: p, text: p.textContent, speed: 40 }));
            if (h2) elementsToType.push({ el: h2, text: h2.textContent, speed: 50 });

            // áº¨n nÃºt vÃ  xÃ³a ná»™i dung Ä‘á»ƒ chuáº©n bá»‹ gÃµ
            if (buttonContainer) {
                buttonContainer.style.opacity = '0';
                buttonContainer.style.pointerEvents = 'none';
            }
            elementsToType.forEach(item => item.el.innerHTML = '');

            // Xá»­ lÃ½ riÃªng cho h1: thÃªm hiá»‡u á»©ng vÃ  hiá»ƒn thá»‹ ngay
            if (h1) {
                h1.style.opacity = '0'; // áº¨n Ä‘i Ä‘á»ƒ animation cháº¡y
                h1.classList.add('title-animate');
            }

            // Báº¯t Ä‘áº§u gÃµ tuáº§n tá»±
            for (const item of elementsToType) {
                await typeEffect(item.el, item.text, item.speed);
            }

            isTyping = false;

            // Hiá»‡n nÃºt sau khi gÃµ xong
            if (buttonContainer) {
                buttonContainer.style.transition = 'opacity 0.5s';
                buttonContainer.style.opacity = '1';
                buttonContainer.style.pointerEvents = 'auto';

                // Náº¿u lÃ  cáº£nh cÃ³ nÃºt "Tiáº¿p tá»¥c", báº¯t Ä‘áº§u Ä‘áº¿m ngÆ°á»£c
                const continueBtn = buttonContainer.querySelector('.continueBtn');
                if (continueBtn) {
                    startCountdown(continueBtn);
                }
            }
        }

        function clearCountdown() {
            if (autoAdvanceTimer) {
                clearInterval(autoAdvanceTimer);
                autoAdvanceTimer = null;
            }
        }

        // HÃ m Ä‘áº¿m ngÆ°á»£c tá»± Ä‘á»™ng chuyá»ƒn cáº£nh
        function startCountdown(button) {
            let countdown = 3;
            const originalText = button.textContent;
            button.textContent = `${originalText} (${countdown})`;

            autoAdvanceTimer = setInterval(() => {
                countdown--;
                if (countdown > 0) {
                    button.textContent = `${originalText} (${countdown})`;
                } else {
                    clearCountdown();
                    moveToNextScene();
                }
            }, 1000);
        }

        function advanceScene() {
            if (currentScene >= scenes.length - 1) return;

            scenes[currentScene].classList.add('hidden');
            currentScene++;
            const nextScene = scenes[currentScene];
            
            nextScene.classList.remove('hidden');
            mainContainer.classList.remove('initial-entrance', 'scene-transition');
            void mainContainer.offsetWidth; // Trigger reflow to restart animation
            mainContainer.classList.add('scene-transition');

            startTypingForScene(nextScene);
        }

        // Cháº¡y hiá»‡u á»©ng khi trang Ä‘Æ°á»£c táº£i
        document.addEventListener('DOMContentLoaded', () => {
            const scene1 = document.getElementById('scene-1');
            // áº¨n táº¥t cáº£ cÃ¡c cáº£nh trá»« cáº£nh Ä‘áº§u tiÃªn
            scenes.forEach((scene, index) => {
                if (index !== 0) scene.classList.add('hidden');
            });
            
            mainContainer.classList.add('initial-entrance');
            scene1.classList.remove('hidden');
            startTypingForScene(scene1);
        });
    </script>
</body>
</html>